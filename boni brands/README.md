# Telegram Weather & Stocks Bot (n8n)

**Тестовое задание для позиции программиста.**  
Бот работает на платформе [n8n.io](https://n8n.io) и умеет выполнять две функции:

1. Сообщать погоду в указанном городе.
2. Показывать текущую цену акций NASDAQ-компаний.

Все действия пользователя логируются в Google Таблицу.

---

## Функциональность

### Погода
Пользователь отправляет название города — бот сообщает температуру и советует, надевать ли куртку.

- Если температура ниже 15°C → бот говорит:  
  `Сегодня {{температура}} градусов, холодно, одень куртку.`
- Если 15°C и выше →  
  `Сегодня {{температура}} градусов, отличный день, можно бегать в футболке.`

API: [WeatherAPI](https://www.weatherapi.com/api-explorer.aspx)

---

### Цена акций
Пользователь отправляет название компании или тикер — бот сообщает актуальную цену акций на NASDAQ.

API: [Yahoo Finance via RapidAPI](https://rapidapi.com/apidojo/api/yahoo-finance1)

---

## Обработка ошибок
Бот корректно:
- определяет, когда введено нечто нераспознаваемое (ни город, ни компания)
- даёт ответ: “Не удалось определить запрос. Попробуйте ещё раз.”

---

## Логирование
Все запросы и ответы логируются в **Google Таблицу**:
- Дата и время
- Введённый текст
- Тип запроса (погода/акции/ошибка)
- Ответ бота

---

## Технологии

- [n8n Cloud](https://n8n.io)
- Telegram Bot API
- WeatherAPI
- Yahoo Finance (RapidAPI)
- Google Sheets Integration

---

## Установка и запуск

1. Создайте бота через [@BotFather](https://t.me/BotFather)
2. Зарегистрируйтесь на [WeatherAPI](https://www.weatherapi.com/)
3. Получите API-ключ на [RapidAPI (Yahoo Finance)](https://rapidapi.com/apidojo/api/yahoo-finance1)
4. Создайте Google Таблицу с нужными колонками (`ChatId`, `Question`, `Reply`)
5. Импортируйте `workflow.json` в n8n
6. Настройте переменные и креды:
   - Telegram Bot Token
   - WeatherAPI Key
   - RapidAPI Key + Host
   - Доступ к Google Sheets

---

## Пример использования

**Пользователь:** `Лондон`  
**Ответ:** `Сегодня 12 градусов, холодно, одень куртку.`

**Пользователь:** `AAPL`  
**Ответ:** `Текущая цена акций AAPL: $184.97`
